(function(e){function t(t){for(var r,s,i=t[0],l=t[1],c=t[2],f=0,m=[];f<i.length;f++)s=i[f],Object.prototype.hasOwnProperty.call(a,s)&&a[s]&&m.push(a[s][0]),a[s]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r]);u&&u(t);while(m.length)m.shift()();return o.push.apply(o,c||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],r=!0,i=1;i<n.length;i++){var l=n[i];0!==a[l]&&(r=!1)}r&&(o.splice(t--,1),e=s(s.s=n[0]))}return e}var r={},a={app:0},o=[];function s(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=r,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(n,r,function(t){return e[t]}.bind(null,r));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=t,i=i.slice();for(var c=0;c<i.length;c++)t(i[c]);var u=l;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"08cb":function(e,t,n){},"4b51":function(e,t,n){"use strict";n("62ce")},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),a=n("5c96"),o=n.n(a),s=(n("0fae"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("header",{staticClass:"header"},[n("div",{staticClass:"title"},[n("Area",{attrs:{area:e.title}})],1),e.member.length?n("el-progress",{attrs:{"text-inside":!0,"stroke-width":20,percentage:e.handleProgress(),status:"exception"}}):e._e(),n("div",{staticClass:"header-button"},[n("el-tooltip",{attrs:{content:"说明"}},[n("el-button",{attrs:{icon:"el-icon-s-order"},on:{click:e.openDescription}})],1)],1)],1),n("main",{staticClass:"main"},[n("div",{staticClass:"main-item"},[e.member.length?n("Rank",{attrs:{member:e.member}}):n("div",{staticClass:"start-description"},[n("span",[e._v("欢迎进入CHAPTURE。 "),n("br"),e._v("在此可进入查看网站说明:)")]),n("br"),n("el-button",{on:{click:e.openDescription}},[e._v("说明")])],1)],1),n("div",{staticClass:"center"},[n("Area",{attrs:{area:e.area}})],1),n("div",{staticClass:"main-item"},[n("config",{attrs:{config:e.config},on:{"update:config":function(t){e.config=t}}}),n("Message",{attrs:{message:e.message}})],1)]),n("footer",{staticClass:"footer"},[n("div",{staticClass:"handle-button"},[n("el-button-group",[n("el-button",{attrs:{disabled:"start"===e.flag||"continue"===e.flag},on:{click:e.start}},[e._v("开始")]),n("el-button",{attrs:{disabled:"stop"===e.flag||""===e.flag||"over"===e.flag},on:{click:e.stop}},[e._v("停止")]),n("el-button",{attrs:{disabled:"stop"!=e.flag},on:{click:e.continueTo}},[e._v("继续")])],1)],1)]),n("el-dialog",{attrs:{title:"Chapter",visible:e.visible,"before-close":e.closeDescription}},[n("Description")],1)],1)}),i=[],l=n("1da1"),c=n("5530"),u=n("2909"),f=(n("96cf"),n("159b"),n("99af"),n("b0c0"),n("4de4"),n("7db0"),n("4e82"),n("fb6a"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"area"},e._l(e.area,(function(t,r){return n("div",{key:r},e._l(t,(function(t,r){return n("span",{key:r,staticClass:"line"},[n("div",{staticClass:"area-item",style:e.handleCubeStyle(t)})])})),0)})),0)}),m=[],p={props:{area:{type:Array,default:function(){return[[]]}}},methods:{handleCubeStyle:function(e){return{background:e}}}},b=p,d=(n("ffbe"),n("2877")),h=Object(d["a"])(b,f,m,!1,null,null,null),g=h.exports,v=function(e){this.name=e.name,this.score=0,this.color=e.color,this.status="ing",this.number=e.number,this.x=[],this.y=[],this.header=1,this.time=100},_=v,y=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"rank"},[n("el-table",{attrs:{size:"mini",data:e.member,"highlight-current-row":"","row-class-name":e.tableRowClassName}},[n("el-table-column",{attrs:{label:"名称",prop:"name",fixed:""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.name)),n("span",{staticClass:"color-cube",style:{background:t.row.color}})]}}])}),n("el-table-column",{attrs:{label:"资源(万亿吨)",prop:"score"}}),n("el-table-column",{attrs:{label:"占地(光年^2)",prop:"number"}}),n("el-table-column",{attrs:{label:"探索序列",prop:"header"}}),n("el-table-column",{attrs:{label:"拓展延迟",prop:"time"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.time)+"% ")]}}])})],1)],1)},k=[],C={props:{member:{type:Array,default:function(){return[]}}},methods:{tableRowClassName:function(e){var t=e.row;return"ing"===t.status?"ing-row":"end"===t.status?"danger-row":"win"===t.status?"success-row":t.time>100?"warning-row":""}}},w=C,x=Object(d["a"])(w,y,k,!1,null,null,null),M=x.exports,O="red",$="black",j=[[$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$],[$,O,O,O,$,O,O,O,$,O,O,O,$,O,O,O,$,O,$,O,$,O,O,O,$,$,O,O,O,$],[$,O,$,$,$,O,$,O,$,O,$,O,$,$,O,$,$,O,$,O,$,O,$,O,$,$,O,O,$,$],[$,O,$,$,$,O,O,O,$,O,O,O,$,$,O,$,$,O,$,O,$,O,O,O,$,$,O,$,$,$],[$,O,O,O,$,O,$,O,$,O,$,$,$,$,O,$,$,O,O,O,$,O,$,$,O,$,O,O,O,$],[$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$]],P=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"message"}},[n("ul",e._l(e.message,(function(t,r){return n("li",{key:r},[e._v(" ["+e._s(t.date)+"]"+e._s(t.message)+" ")])})),0)])},E=[],S={props:{message:{type:Array,default:function(){return[]}}},watch:{message:{handler:function(){this.$nextTick((function(){var e=document.getElementById("message");e.scrollTop=e.scrollHeight}))}}}},V=S,A=(n("7647"),Object(d["a"])(V,P,E,!1,null,"1787cdfc",null)),R=A.exports,I=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"config"},[n("el-form",{staticClass:"config-form",attrs:{model:e.config}},[n("el-form-item",[n("el-slider",{attrs:{min:100,max:1e4,"show-input":"","format-tooltip":function(){return"获胜分数："+e.config.winScore}},on:{change:e.emitConfig},model:{value:e.config.winScore,callback:function(t){e.$set(e.config,"winScore",t)},expression:"config.winScore"}})],1),n("el-form-item",[n("el-slider",{attrs:{min:110,max:5e3,"show-input":"","format-tooltip":function(){return"最大扩展周期："+e.config.time+"%"}},on:{change:e.emitConfig},model:{value:e.config.time,callback:function(t){e.$set(e.config,"time",t)},expression:"config.time"}})],1),n("el-form-item",{staticClass:"tag"},[e._l(e.config.member,(function(t,r){return n("el-tag",{key:t.color,attrs:{closable:"","disable-transitions":!1},on:{close:function(n){return e.handleClose(t,r)}}},[e._v(" "+e._s(t.name)+" "),n("el-tooltip",{attrs:{content:t.color}},[n("span",{staticClass:"color-cube config-cube",style:{background:t.color}})])],1)})),e.inputVisible?n("div",{staticClass:"add-tag-form"},[n("el-input",{ref:"saveTagInput",staticClass:"input-new-tag",attrs:{size:"mini",placeholder:"请输入名称"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleInputConfirm.apply(null,arguments)}},model:{value:e.inputValue.name,callback:function(t){e.$set(e.inputValue,"name",t)},expression:"inputValue.name"}}),n("el-input",{ref:"saveTagInput",staticClass:"input-new-tag",attrs:{placeholder:"请输入颜色(16进制)",size:"mini"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleInputConfirm.apply(null,arguments)}},model:{value:e.inputValue.color,callback:function(t){e.$set(e.inputValue,"color",t)},expression:"inputValue.color"}}),n("el-tooltip",[n("div",{attrs:{slot:"content"},slot:"content"},[n("sketch-picker",{on:{input:e.updateColor},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleInputConfirm.apply(null,arguments)}},model:{value:e.inputValue.color,callback:function(t){e.$set(e.inputValue,"color",t)},expression:"inputValue.color"}})],1),n("el-button",[e._v("取色器")])],1),n("el-button",{on:{click:e.handleInputConfirm}},[e._v("确认")]),n("el-button",{on:{click:e.handleInputCancel}},[e._v("取消")])],1):n("el-button",{staticClass:"button-new-tag",attrs:{size:"mini"},on:{click:e.showInput}},[e._v("+新成员")])],2),n("el-form-item",{staticClass:"presets"},[n("el-select",{attrs:{multiple:"",clearable:"",size:"mini"},model:{value:e.currentPresets,callback:function(t){e.currentPresets=t},expression:"currentPresets"}},e._l(e.presets,(function(t,r){return n("el-option",{key:r,attrs:{value:t.color,label:t.name}},[n("el-tooltip",{attrs:{content:t.color}},[n("span",{staticClass:"color-cube config-cube",style:{background:t.color}})]),e._v(" "+e._s(t.name)+" ")],1)})),1),n("el-button",{staticClass:"preset-button",on:{click:e.handlePresetsConfig}},[e._v("添加预设")])],1)],1)],1)},T=[],D=(n("a434"),[{name:"Ava",color:"#9ac8e2"},{name:"Bella",color:"#bd7d74"},{name:"Coarl",color:"#b8a6d9"},{name:"Diana",color:"#e799b0"},{name:"Eileen",color:"#576690"}]),H=D,z=n("c345"),F={components:{"sketch-picker":z["Sketch"]},props:{config:{type:Object,default:function(){return{}}}},data:function(){return{inputVisible:!1,inputValue:{name:"",color:""},presets:H,currentPresets:[]}},methods:{handleClose:function(e,t){this.presets.push(this.config.member[t]),this.config.member.splice(t,1),this.$forceUpdate()},handlePresetsConfig:function(){var e=this;this.currentPresets.forEach((function(t){var n=e.presets.find((function(e){return e.color===t}));e.config.member.push(n)})),this.presets=this.presets.filter((function(t){return-1===e.currentPresets.indexOf(t.color)})),this.currentPresets=[]},showInput:function(){var e=this;this.inputVisible=!0,this.$nextTick((function(){e.$refs.saveTagInput.$refs.input.focus()}))},handleInputConfirm:function(){var e=this.inputValue,t=/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/;t.test(e.color)?(this.config.member.push(e),this.emitConfig(),this.inputVisible=!1,this.inputValue={color:"",name:""}):this.$message.error("["+e.color+"]不是一个可用的颜色格式！")},handleInputCancel:function(){this.inputValue={name:"",color:""},this.inputVisible=!1},emitConfig:function(){this.$emit("update:config",this.config),console.log(this.config),console.log("配置更新成功！")},updateColor:function(e){this.inputValue.color=e.hex}}},B=F,J=(n("4b51"),Object(d["a"])(B,I,T,!1,null,"4e346d40",null)),N=J.exports;n("ac1f"),n("5319"),n("4d63"),n("25f0");function U(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"yyyy-MM-dd HH:mm:ss 星期w",n={"M+":e.getMonth()+1,"d+":e.getDate(),"H+":e.getHours(),"h+":e.getHours()>12?e.getHours()-12:e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),w:"日一二三四五六".charAt(e.getDay())};for(var r in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length))),n)new RegExp("("+r+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?n[r]:("00"+n[r]).substr((""+n[r]).length)));return t}var Y=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},q=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"description"},[n("h1",[e._v("Chapter")]),e._v(" 一个毫无意义的看着像素点们争夺地盘的网站。 "),n("h2",[e._v("游戏说明")]),e._v(" 1. 每个成员代表一个颜色，在方圆为50平方光年的荒芜区域进行资源争夺。"),n("br"),e._v(" 2. 每一个小点就是1平方光年。 开拓一个荒芜区域，资源增加1万亿吨。"),n("br"),e._v(" 3. 占领他人一个区域，资源增加10万亿吨。 被占领一个区域，资源减少10万亿吨。"),n("br"),e._v(" 4. %，为0.1秒进行一次随机探索。当负债资源时，开拓周期会变大，探索速率会降低，到达最大开拓周期后停止争夺。"),n("br"),e._v(" 5. 每当有一个成员停止争夺时，将会有一个随机成员获得新的随机探索序列。如果获得探索序列的成员之前是停止争夺的，则继续开始争夺，并资源清零。"),n("br"),e._v(" 6. 当某位成员达到最大资源或场上剩下一位成员争夺时，游戏结束，该成员获胜。 "),n("h2",[e._v("控制说明")]),n("h3",[e._v("新增成员")]),e._v(" 在右边【+新成员】中添加新成员。填写两个内容，一个是名称，一个是对应的颜色。颜色可以从取色其中直接取。"),n("br"),e._v(" 同时，也可以直接通过预设成员直接添加新成员。预设成员是在代码里面提前写好的。"),n("br"),e._v(" 删除成员时、删除的成员会进入预设成员列表中，方便回收。"),n("br"),n("h3",[e._v("参数配置")]),e._v(" 通过右上角两个滑块，可以直接调整最大获胜资源和最大扩展周期，从而改变整个游戏的周期节奏。"),n("br"),n("h3",[e._v("按钮")]),e._v(" 下方点击【开始】即开始一轮新的游戏。"),n("br"),e._v(" 点击【停止】即暂停整个游戏。"),n("br"),e._v(" 点击【继续】则继续整个游戏。"),n("br"),n("h2",[e._v("源码说明")]),e._v(" 核心功能算法写在App中。 "),n("br"),e._v(" Area用于绘制像素点。 "),n("br"),e._v(" Config用于控制配置。"),n("br"),e._v(" Description即游戏说明。 "),n("br"),e._v(" Message为游戏日志。 "),n("br"),e._v(" Rank为游戏排名。"),n("br"),e._v(" area.js存放需要被绘图的一些静态的东西。 "),n("br"),e._v(" member.js存放成员类。"),n("br"),e._v(" presets.js存放预设成员配置"),n("br"),n("h2",[e._v("注意")]),e._v(" 1. 不同的成员尽量使用不同的颜色。"),n("br"),e._v(" 2. 至少需要两名成员才能开始游戏。 "),n("br"),e._v(" 3. 停止的时候如果直接点击开始会直接重新开始游戏。"),n("br"),e._v(" 4. 若修改了任何配置，必须要在下一轮游戏中才会生效。"),n("br")])}],G={},K=Object(d["a"])(G,Y,q,!1,null,null,null),L=K.exports,Q={components:{Area:g,Rank:M,Message:R,Config:N,Description:L},data:function(){return{position:{x:3,y:5},title:j,area:[],size:50,member:[],flag:"",config:{winScore:100,member:[],time:500},message:[],visible:!1}},created:function(){this.createMap()},methods:{handleProgress:function(){return this.member.length&&parseInt(this.member[0].score>this.config.winScore?100:this.member[0].score/this.config.winScore*100)||0},openDescription:function(){this.visible=!0},closeDescription:function(){this.visible=!1},start:function(){var e=this,t=this.config.member;t.length<2?this.$message.error("请至少有两名成员!"):(console.log(t),this.addMessage("争夺开始！"),this.createMap(),this.flag="start",this.member=[],t.forEach((function(t){e.member=[].concat(Object(u["a"])(e.member),[new _(Object(c["a"])(Object(c["a"])({},t),{},{number:0}))])})),this.member.forEach((function(t){e.addMessage(t.name+"加入争夺！"),e.makeRandomPath(t,t.header-1)})))},stop:function(){this.flag="stop",this.addMessage("争夺停止！")},continueTo:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.addMessage("争夺继续！"),e.flag="continue",console.log(e.member),e.member.forEach((function(t){if("end"!==t.status)for(var n=0;n<t.header;n++)e.makeRandomPath(t,n),console.log(n)}));case 4:case"end":return t.stop()}}),t)})))()},createMap:function(){var e=this.size;this.area=new Array(e);for(var t=0;t<e;t++)this.area[t]=new Array(e);for(var n=0;n<e;n++)for(var r=0;r<e;r++)this.area[n][r]="#000000"},makeRandomPath:function(e,t){var n=this.size;if(!e.x[t]){var r=Math.floor(Math.random()*n),a=Math.floor(Math.random()*n);e.x[t]=r,e.y[t]=a}var o=e.x[t],s=e.y[t],i=0,l=this,c=setTimeout((function t(){if(e.time=l.timeAround(e),(l.member.filter((function(e){return"ing"===e.status})).length<=1||e.score>l.config.winScore)&&"win"!==e.status)return l.flag="over",e.status="win",l.addMessage("争夺结束！"+e.name+"获胜!"),void clearInterval(c);if(i=Math.floor(4*Math.random()),0===i&&o<n-1?o++:1===i&&s<n-1?s++:2===i&&o>0?o--:3===i&&s>0&&s--,l.area[o][s]!==e.color){e.number++,"#000000"===l.area[o][s]?e.score++:e.score+=10;var r=l.member.find((function(e){return e.color===l.area[o][s]}));r&&("end"!==r.status&&(r.score-=10),r.number--),l.member.sort((function(e,t){return t.score-e.score})),l.member=l.member.slice(0)}if(l.area[o][s]=e.color,l.area=l.area.slice(0),e.time<=l.config.time){if("stop"===l.flag||"over"===l.flag)return void clearTimeout(c);c=setTimeout(t,e.time)}else{clearTimeout(c),e.status="end",e.header=0,l.addMessage(e.name+"停止争夺！");var a=Math.floor(Math.random()*l.member.length);if("end"===l.member[a].status){var u={color:l.member[a].color,name:l.member[a].name,number:l.member[a].number};l.member[a]=new _(u),l.addMessage(l.member[a].name+"继续争夺！"),console.log(l.member[a].header-1)}else l.addMessage(l.member[a].name+"将添加新探索序列！"),l.member[a].header++;l.makeRandomPath(l.member[a],l.member[a].header-1)}}),e.time)},timeAround:function(e){return e.score<0?100-10*e.score:100},addMessage:function(e){var t=U(new Date,"yyyy-MM-dd HH:mm:ss");this.message.push({date:t,message:e})}}},W=Q,X=(n("5c0b"),n("658fa"),Object(d["a"])(W,s,i,!1,null,"cb6b8652",null)),Z=X.exports;r["default"].use(o.a),new r["default"]({render:function(e){return e(Z)}}).$mount("#app")},"5c0b":function(e,t,n){"use strict";n("9c0c")},"62ce":function(e,t,n){},"658fa":function(e,t,n){"use strict";n("b0b9")},7647:function(e,t,n){"use strict";n("08cb")},"9c0c":function(e,t,n){},b0b9:function(e,t,n){},b2e0:function(e,t,n){},ffbe:function(e,t,n){"use strict";n("b2e0")}});
//# sourceMappingURL=app.a96c74eb.js.map